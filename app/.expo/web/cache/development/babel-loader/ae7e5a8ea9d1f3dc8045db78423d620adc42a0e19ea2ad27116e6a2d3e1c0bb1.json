{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\other\\\\PERSONAL PROJECTS\\\\pharmacy-tracker\\\\app\\\\src\\\\screens\\\\PharmacyListScreen.js\";\nimport React, { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport * as Location from 'expo-location';\nimport { fetchNearest, fetchAll } from '../api';\nimport PharmacyCard from '../components/PharmacyCard';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function PharmacyListScreen({\n  navigation\n}) {\n  const [loading, setLoading] = useState(false);\n  const [list, setList] = useState([]);\n  const [coords, setCoords] = useState(null);\n  useEffect(() => {\n    loadNearest();\n  }, []);\n  async function loadNearest() {\n    setLoading(true);\n    try {\n      const {\n        status\n      } = await Location.requestForegroundPermissionsAsync();\n      if (status !== 'granted') {\n        Alert.alert('Location permission', 'Permission denied — showing all pharmacies instead.');\n        const all = await fetchAll();\n        setList(all);\n        setLoading(false);\n        return;\n      }\n      const loc = await Location.getCurrentPositionAsync({\n        accuracy: Location.Accuracy.Balanced\n      });\n      setCoords(loc.coords);\n      const near = await fetchNearest(loc.coords.latitude, loc.coords.longitude, 50);\n      setList(near);\n    } catch (e) {\n      console.error(e);\n      Alert.alert('Error', 'Could not fetch pharmacies: ' + (e.message || e));\n    } finally {\n      setLoading(false);\n    }\n  }\n  if (loading) {\n    return _jsxDEV(View, {\n      style: styles.center,\n      children: _jsxDEV(ActivityIndicator, {\n        size: \"large\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this);\n  }\n  return _jsxDEV(View, {\n    style: {\n      flex: 1\n    },\n    children: [_jsxDEV(View, {\n      style: {\n        padding: 12,\n        flexDirection: 'row',\n        justifyContent: 'space-between'\n      },\n      children: [_jsxDEV(Button, {\n        title: \"Refresh\",\n        onPress: loadNearest\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this), _jsxDEV(Button, {\n        title: \"Add Pharmacy\",\n        onPress: () => navigation.navigate('Register')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), _jsxDEV(FlatList, {\n      data: list,\n      keyExtractor: i => String(i.id),\n      renderItem: ({\n        item\n      }) => _jsxDEV(PharmacyCard, {\n        item: item,\n        onPress: () => navigation.navigate('Detail', {\n          item,\n          coords\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }, this),\n      ListEmptyComponent: _jsxDEV(View, {\n        style: styles.center,\n        children: _jsxDEV(Text, {\n          children: \"No pharmacies found.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 57\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 29\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n}\nconst styles = StyleSheet.create({\n  center: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center'\n  }\n});","map":{"version":3,"names":["React","useEffect","useState","View","Text","FlatList","Button","StyleSheet","ActivityIndicator","Alert","Location","fetchNearest","fetchAll","PharmacyCard","jsxDEV","_jsxDEV","PharmacyListScreen","navigation","loading","setLoading","list","setList","coords","setCoords","loadNearest","status","requestForegroundPermissionsAsync","alert","all","loc","getCurrentPositionAsync","accuracy","Accuracy","Balanced","near","latitude","longitude","e","console","error","message","style","styles","center","children","size","fileName","_jsxFileName","lineNumber","columnNumber","flex","padding","flexDirection","justifyContent","title","onPress","navigate","data","keyExtractor","i","String","id","renderItem","item","ListEmptyComponent","create","alignItems"],"sources":["C:/Users/other/PERSONAL PROJECTS/pharmacy-tracker/app/src/screens/PharmacyListScreen.js"],"sourcesContent":["// app/src/screens/PharmacyListScreen.js\r\nimport React, { useEffect, useState } from 'react';\r\nimport { View, Text, FlatList, Button, StyleSheet, ActivityIndicator, Alert } from 'react-native';\r\nimport * as Location from 'expo-location';\r\nimport { fetchNearest, fetchAll } from '../api';\r\nimport PharmacyCard from '../components/PharmacyCard';\r\n\r\nexport default function PharmacyListScreen({ navigation }) {\r\n  const [loading, setLoading] = useState(false);\r\n  const [list, setList] = useState([]);\r\n  const [coords, setCoords] = useState(null);\r\n\r\n  useEffect(() => { loadNearest(); }, []);\r\n\r\n  async function loadNearest() {\r\n    setLoading(true);\r\n    try {\r\n      const { status } = await Location.requestForegroundPermissionsAsync();\r\n      if (status !== 'granted') {\r\n        Alert.alert('Location permission', 'Permission denied — showing all pharmacies instead.');\r\n        const all = await fetchAll();\r\n        setList(all);\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      const loc = await Location.getCurrentPositionAsync({ accuracy: Location.Accuracy.Balanced });\r\n      setCoords(loc.coords);\r\n      const near = await fetchNearest(loc.coords.latitude, loc.coords.longitude, 50);\r\n      setList(near);\r\n    } catch (e) {\r\n      console.error(e);\r\n      Alert.alert('Error', 'Could not fetch pharmacies: ' + (e.message || e));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <View style={styles.center}>\r\n        <ActivityIndicator size=\"large\" />\r\n      </View>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <View style={{ flex: 1 }}>\r\n      <View style={{ padding: 12, flexDirection: 'row', justifyContent: 'space-between' }}>\r\n        <Button title=\"Refresh\" onPress={loadNearest} />\r\n        <Button title=\"Add Pharmacy\" onPress={() => navigation.navigate('Register')} />\r\n      </View>\r\n\r\n      <FlatList\r\n        data={list}\r\n        keyExtractor={(i) => String(i.id)}\r\n        renderItem={({ item }) => (\r\n          <PharmacyCard item={item} onPress={() => navigation.navigate('Detail', { item, coords })} />\r\n        )}\r\n        ListEmptyComponent={<View style={styles.center}><Text>No pharmacies found.</Text></View>}\r\n      />\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  center: { flex: 1, alignItems: 'center', justifyContent: 'center' }\r\n});\r\n"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}